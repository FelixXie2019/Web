<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="jquery版本.css">
</head>
<body>
<!--    外部容器-->
<div class="wrap">
<!--    遮罩层-->
    <div id="mask">
        <div class="maskTop"></div>
        <div class="maskBottom"></div>
        <span class="maskLine"></span>
    </div>
    <!--头部-->
    <header id="header">
        <div class="headerMain">
            <h1 class="logo"><a href="javascript:;"><img src="day01/work/00.头部/img/logo.png" alt=""></a></h1>
            <nav class="nav">
                <ul>
                    <li>
                        <a href="javascript:;">
                            <div class="up"><img src="day01/work/00.头部/img/home_gruen.png" alt=""></div>
                            <div class="down"><img src="day01/work/00.头部/img/home.png" alt=""></div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">Course</div>
                            <div class="down">Course</div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">Works</div>
                            <div class="down">Works</div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">About</div>
                            <div class="down">About</div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">Team</div>
                            <div class="down">Team</div>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="arrow"></div>
    </header>
    <!--内容区-->
    <section id="content">
        <ul class="menuBar">
            <li class="active"></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <ul class="lists">
            <li>
                <div class="home">
                    <ul class="homeList">
                        <li class="active">
                            <div class="commonTitle">第一页</div>
                        </li>
                        <li>
                            <div class="commonTitle">第二页</div>
                        </li>
                        <li>
                            <div class="commonTitle">第三页</div>
                        </li>
                        <li>
                            <div class="commonTitle">第四页</div>
                        </li>
                    </ul>
                    <ul class="homeIcon">
                        <li class="active"></li>
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                </div>
            </li>
            <li>
                <div class="course">
                    <header class="course1">
                        <h2 class="commonTitle">
                            <span>EINIGE</span><br>
                            <span>UNSERER</span><br>
                            <span>KUNDEN</span>
                        </h2>
                    </header>
                    <div class="course2">
                        <p class="commonText">
                            Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit, gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann.
                            <br>
                            Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren, was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.
                        </p>
                    </div>
                    <div class="course3">
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                         </div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="itemInner">
                                <div class="front"></div>
                                <div class="back">今天天气真不错</div>
                            </div>
                        </div>
                    </div>
                    <div class="plane1"></div>
                    <div class="plane2"></div>
                    <div class="plane3"></div>
                </div>
            </li>
            <li>
                <div class="works">
                    <header class="works1">
                        <h2 class="commonTitle">
                            <span>EINBLICK</span><br>
                            <span>ERKENNTNIS</span><br>
                            <span>ERGEBNIS</span>
                        </h2>
                    </header>
                    <div class="works2">
                        <div class="item">
                            <img src="day01/work/00.头部/img/worksimg1.jpg" alt="">
                            <div class="mask">
                                <span>在我的后花园</span>
                                <div class="icon"></div>
                            </div>
                        </div>
                        <div class="item">
                            <img src="day01/work/00.头部/img/worksimg2.jpg" alt="">
                            <div class="mask">
                                <span>在我的后花园</span>
                                <div class="icon"></div>
                            </div>
                        </div>
                        <div class="item">
                            <img src="day01/work/00.头部/img/worksimg3.jpg" alt="">
                            <div class="mask">
                                <span>在我的后花园</span>
                                <div class="icon"></div>
                            </div>
                        </div>
                        <div class="item">
                            <img src="day01/work/00.头部/img/worksimg4.jpg" alt="">
                            <div class="mask">
                                <span>在我的后花园</span>
                                <div class="icon"></div>
                            </div>
                        </div>
                    </div>
                    <div class="works3"></div>
                    <div class="pencil1"></div>
                    <div class="pencil2"></div>
                    <div class="pencil3"></div>
                </div>
            </li>
            <li>
                <div class="about">
                    <header class="about1">
                        <h2 class="commonTitle">
                            <span>DIE</span><br>
                            <span>SPEZIELLE</span><br>
                            <span>VIELFALT</span>
                        </h2>
                    </header>
                    <div class="about2">
                        <p class="commonText">Der bunte Medienmix ist die Faszination die uns antreibt und das, was man an uns schätzt. Von A bis Z und von vorne bis hinten nehmen wir Ihr Projekt unter unsere Fittiche und lassen es zu etwas Großartigem heranwachsen.</p>
                    </div>
                    <div class="about3">
                        <div class="item">
                            <span></span>
                            <ul data-src="day01/work/00.头部/img/about1.jpg"></ul>
                        </div>
                        <div class="item">
                            <span></span>
                            <ul data-src="day01/work/00.头部/img/about3.jpg"></ul>
                        </div>
                    </div>
                </div>
            </li>
            <li>
                <div class="team">
                    <header class="team1">
                        <h2 class="commonTitle">
                            <span>WIR SIND</span><br>
                            <span>VOXELAIR</span>
                        </h2>
                    </header>
                    <div class="team2">
                        <p class="commonText">
                            Wir sind seit 2002 eine Full-Service-Werbeagentur mit Stammsitz in Heimsheim, zwischen Stuttgart und Karlsruhe.
                            <br>
                            Über 60 Jahre Erfahrung vereinen das gesamte VoxelAir-Team. Dabei hat jedes Voxel neben professionellem Allroundwissen auch sein ganz spezielles Gebiet, um selbst die individuellsten Kundenwünsche schnell und kompetent umzusetzen.
                        </p>
                    </div>
                    <ul class="team3">
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                </div>
            </li>
        </ul>
    </section>
</div>




</body>
<script type="text/javascript" src="../jquery.js"></script>
<script>
    $(function(){
        let $arrow=$('#header .arrow');
        let $upNodes=$('#header .headerMain .nav ul li .up');
        let $liNodes=$('#header .headerMain .nav ul li');
        let $content=$('#content');
        let now=0;
        let preIndex=0;
        let flag='';
        let timer=null;
        let $aboutUl=$('#content .lists .about .about3>.item>ul');
        let $homeList=$('#content .lists .home .homeList>li');
        let $homeIcon=$('#content .lists .home .homeIcon>li');
        let $menuBar=$('#content .menuBar>li');
        let $maskLine=$('#mask .maskLine');
        let $maskTop=$('#mask .maskTop');
        let $maskBottom=$('#mask .maskBottom');

        //开机动画
        function loading(){
            let imgArr=['bg1.jpg','bg2.jpg','bg3.jpg','bg4.jpg','bg5.jpg','about1.jpg','about2.jpg','about3.jpg','about4.jpg','worksimg1.jpg','worksimg2.jpg','worksimg3.jpg','worksimg4.jpg','team.png','greenLine.png'];
            //图片张数表示变量 用于记录当前加载完成的图片数量
            let imgFlag=0;
            for(let i=0;i<imgArr.length;i++){
                let imgNode=new Image();
                imgNode.src='day03/work/05.开机动画/img/'+imgArr[i];
                imgNode.onload=function(){
                    imgFlag++;
                    $maskLine.css('width',imgFlag/imgArr.length*100+'%')
                }
                $maskLine.on('transitionend',function(){
                    $maskBottom.css('height',0);
                    $maskTop.css('height',0);
                    $maskLine.css('width',0);
                })
                $maskBottom.on('transitionend',function(){
                    //第一屏入场动画
                    animationArr[0].inAni();
                    //第一屏的3d轮播
                    home3D();
                    $('#mask').remove();
                })
            }
        }
        loading();

        let animationArr=[
            //第一屏
            {
                inAni:function(){
                    let homeList=$('#content .lists .home .homeList');
                    let homeIcon=$('#content .lists .home .homeIcon');
                    homeList.css('transform','translateY(0px)');
                    homeIcon.css('transform','translateY(0px)');
                    homeList.css('opacity','1');
                    homeIcon.css('opacity','1');
                },
                outAni:function(){
                    let homeList=$('#content .lists .home .homeList');
                    let homeIcon=$('#content .lists .home .homeIcon');
                    homeList.css('transform','translateY(-200px)');
                    homeIcon.css('transform','translateY(200px)');
                    homeList.css('opacity','0');
                    homeIcon.css('opacity','0');
                }
        },
        //    第二屏
            {
                inAni:function(){
                    let plane1=$('#content .lists .course .plane1');
                    let plane2=$('#content .lists .course .plane2');
                    let plane3=$('#content .lists .course .plane3');
                    plane1.css('transform','translate(0,0)');
                    plane2.css('transform','translate(0,0)');
                    plane3.css('transform','translate(0,0)');
                },
                outAni:function(){
                    let plane1=$('#content .lists .course .plane1');
                    let plane2=$('#content .lists .course .plane2');
                    let plane3=$('#content .lists .course .plane3');
                    plane1.css('transform','translate(-200px,-200px)');
                    plane2.css('transform','translate(-200px,200px)');
                    plane3.css('transform','translate(200px,-200px)');
                }
            },
            //第三屏
            {
                inAni:function(){
                    let pencil1=$('#content .lists .works .pencil1');
                    let pencil2=$('#content .lists .works .pencil2');
                    let pencil3=$('#content .lists .works .pencil3');
                    pencil1.css('transform','translateY(0px)');
                    pencil2.css('transform','translateY(0px)');
                    pencil3.css('transform','translateY(0px)');

                },
                outAni:function(){
                    let pencil1=$('#content .lists .works .pencil1');
                    let pencil2=$('#content .lists .works .pencil2');
                    let pencil3=$('#content .lists .works .pencil3');
                    pencil1.css('transform','translateY(-200px)');
                    pencil2.css('transform','translateY(200px)');
                    pencil3.css('transform','translateY(200px)');
                }
            },
            //第四屏
            {
                inAni:function(){
                    let aboutItem1=$('#content .lists .about .about3>.item:first-child');
                    let aboutItem2=$('#content .lists .about .about3>.item:last-child');
                    aboutItem1.css('transform','rotate(0deg)');
                    aboutItem2.css('transform','rotate(0deg)');
                },
                outAni:function(){
                    let aboutItem1=$('#content .lists .about .about3>.item:first-child');
                    let aboutItem2=$('#content .lists .about .about3>.item:last-child');
                    aboutItem1.css('transform','rotate(45deg)');
                    aboutItem2.css('transform','rotate(-45deg)');
                }
            },
        //    第五屏
            {
                inAni:function(){
                    let team1=$('#content .lists .team .team1');
                    let team2=$('#content .lists .team .team2');
                    team1.css('transform','translateX(0px)');
                    team2.css('transform','translateX(0px)');
                },
                outAni:function(){
                    let team1=$('#content .lists .team .team1');
                    let team2=$('#content .lists .team .team2');
                    team1.css('transform','translateX(-200px)');
                    team2.css('transform','translateX(200px)');
                }
            }
        ]

        for(let i=0;i<5;i++){
            animationArr[i].outAni();
        }
        headerBind();
        contentBind();
        imgBoom();

        function home3D (){
            let oldIndex=0;
            let autoIndex=0;
            let homeTimer=null;
            $homeIcon.click(function(){
                clearInterval(homeTimer);
                let newIndex=$(this).index();
                $homeIcon.attr('class','');
                $homeIcon[newIndex].className='active';
                //点击右侧  左边的隐藏 右边的显示
                if(oldIndex<newIndex){
                    $homeList[oldIndex].className='leftHide';
                    $homeList[newIndex].className='rightShow';
                }else if(oldIndex>newIndex){
                    //几点左侧  左边显示 右边隐藏
                    $homeList[newIndex].className='leftShow';
                    $homeList[oldIndex].className='rightHide';
                }
                oldIndex=newIndex;
                autoIndex=newIndex;
                auto();
            })
            auto();
            function auto(){
                 homeTimer=setInterval(function(){
                    autoIndex++;
                    if(autoIndex==$homeIcon.length){
                        autoIndex=0;
                    }
                    $homeList[oldIndex].className='leftHide';
                    $homeList[autoIndex].className='rightShow';
                    $homeIcon[oldIndex].className='';
                    $homeIcon[autoIndex].className='active';
                    oldIndex=autoIndex;
                },3000)
            }
        }

        function imgBoom(){
            $aboutUl.each(function(){
                imgChange(this);
            })

            function imgChange(ul){
                //li的宽高都是ul的一半
                let w=ul.offsetWidth/2;
                let h=ul.offsetHeight/2;
                //获取ul上的data-src属性
                let imgSrc=ul.dataset.src;

                for(let i=0;i<4;i++){
                    let liNode=document.createElement('li');
                    let imgNode=new Image();
                    liNode.style.width=w+'px';
                    liNode.style.height=h+'px';
                    imgNode.src=imgSrc;
                    imgNode.style.top=-Math.floor(i/2)*h+'px';
                    imgNode.style.left=-(i%2)*w+'px';
                    liNode.appendChild(imgNode);
                    ul.appendChild(liNode);
                }

                let imgNodes=ul.querySelectorAll('img');
                $(ul).hover(function(){
                        imgNodes[0].style.top=h+'px';
                        imgNodes[1].style.left=-2*w+'px';
                        imgNodes[2].style.left=w+'px';
                        imgNodes[3].style.top=-2*h+'px';

                    },function (){
                        imgNodes[0].style.top=0;
                        imgNodes[1].style.left=-w+'px';
                        imgNodes[2].style.left=0;
                        imgNodes[3].style.top=-h+'px';
                    })

            }
        }

        let $lists=$('#content .lists');
        document.onmousewheel=function(event){
            clearTimeout(timer);
            timer=setTimeout(function(){
                fun(event);
            },200)
        };
        function fun(event){
            if(event.wheelDelta>0){
                flag='down';
            }else{
                flag='up';
            }
            preIndex=now;
            if((preIndex==0 && flag=='up')|| (preIndex==$liNodes.length-1 && flag=='down')){
                return
            }
            switch (flag){
                case 'up':
                    //执行向上逻辑
                    if(now>0){
                        now--;
                        console.log(now);
                    }
                    move(now);
                    break;
                case 'down':
                    //执行向下逻辑
                    if(now<$liNodes.length-1){
                        now++;
                        console.log(now);
                    }
                    move(now);
                    break;
            }
        }

        function contentBind(){
            $content.css('height',$(window).height()-$('#header').height());
            $('#content .lists>li').each(function(){
                this.style.height=$(window).height()-$('#header').height()+'px';
            })
        }

        function headerBind(){
            //设置第一个up的宽度
            $upNodes[0].style.width='100%';
            //初始化小三角的位置
            //注意原生js和jquery获取元素宽度的区别
            //原生js---> htmlElement.offsetWidth    这里offsetWidth是包括border padding 还有 width
            //Jquery----> Jquery对象.width()        所以选择width()而不是innerWidth()  innerWidth()不包括border
            $arrow.css('left',$liNodes[0].getBoundingClientRect().left+$liNodes[0].offsetWidth/2-$arrow.width()/2);
            $liNodes.click(function(){
                // $upNodes.css('width','');
                // $upNodes[$(this).index()].style.width='100%';
                // $arrow.css('left',$liNodes[$(this).index()].getBoundingClientRect().left +$liNodes[$(this).index()].offsetWidth/2-$arrow.width()/2);
                preIndex=now;
                now=$(this).index();
                if(preIndex==now){
                    return
                }
                move(now);
            })
            //侧边导航
            $menuBar.click(function(){
                preIndex=now;
                //点击实现翻页
                now=$(this).index();
                if(preIndex==now){
                    return
                }
                move(now);
            })
        }

        //屏幕滑动函数
        function move(now){
        //导航部分 高亮 小三角
            // 1.宽度
            $upNodes.css('width','');
            $upNodes[now].style.width='100%';
            $arrow.css('left',$liNodes[now].getBoundingClientRect().left+$liNodes[now].offsetWidth/2-$arrow.width()/2);
        //页面的滚动是通过lists的top值，所以也需要修改
        //    屏幕切换     当前所在第几屏*视口高度-header高度
            $lists.css('top',-now*($(window).height()-$('#header').height()));

        //    侧边导航 小圆点
            $menuBar.each(function(){
                $menuBar[$(this).index()].className='';
            })
            $menuBar[now].className='active';

            //出场动画
            animationArr[now].inAni();
            animationArr[preIndex].outAni();
        }

        move(0);
    })



</script>
</html>